<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="style.css">
  <title>Credit Card Checkout</title>
  <script src="https://kit.fontawesome.com/e04ccf61b7.js" crossorigin="anonymous"></script>
</head>
<body>
  <div class="modal-wrapper">
    <div class="card-image">
      <img class="card-background" src="card.png" alt="Credit Card">
      <div class="card-front">
        <div class="card-logo">
          <div class="logo-circle left"></div>
          <div class="logo-circle right"></div>
        </div>
        <span class="card-number">XXXX XXXX XXXX XXXX</span>
        <div class="card-info left">
          <span class="card-holder-title">CARDHOLDER NAME</span>
          <span class="card-holder-name">NAME SURNAME</span>
        </div>
        <div class="card-info right">
          <span class="valid-thru-title">VALID THRU</span>
          <span class="valid-thru-date">MM/YY</span>
        </div>
      </div>
      <div class="card-rear">
        <div class="card-logo">
          <div class="logo-circle left"></div>
          <div class="logo-circle right"></div>
        </div>
        <div class="black-bar"></div>
        <div class="card-info">
          <span class="white-bar"></span>
          <span class="security-code">123</span>
        </div>
      </div>
    </div>
    <div class="card-form">
        <div class="form-wrapper">
          <form action="#">
            <div class="form-input">
              <i class="far fa-credit-card"></i>
              <input type="text" name="card-number" id="#number" placeholder="Card Number" onclick="flipCard(event);" onblur="deactivateBorder(event)" value="">
            </div>
            <div class="form-input">
              <i class="fas fa-user"></i>
              <input type="text" name="card-holder-name" id="#name" placeholder="Card Holder Name" onclick="flipCard(event);" onblur="deactivateBorder(event)" value="">
            </div>
            <div class="form-input">
              <i class="fas fa-calendar-day"></i>
              <input type="text" name="valid-thru-date" id="#expiry" placeholder="Expiry Date" onclick="flipCard(event);" onblur="deactivateBorder(event)" value="">
            </div>
            <div class="form-input">
              <i class="fas fa-lock"></i>
              <input type="number" name="security-code" id="#code" placeholder="Security Code" onclick="flipCard(event);" onblur="deactivateBorder(event)" value="">
            </div>
            <div class="form-input btn">
              <i class="fas fa-check"></i>
              <button type="submit">Done</button>
            </div>
          </form>
        </div>
    </div>
  </div>
  <script>
    var isFront = true;
    var animDuration = 500;
    var cardContainer = document.querySelector(".card-image");
    var creditCard = document.querySelector(".card-background");
    var cardFront = document.querySelector(".card-front");
    var cardRear = document.querySelector(".card-rear");
    var cardLogo = document.querySelector(".card-logo");

    console.log(creditCard, cardFront, cardRear, cardLogo);

    function flipCard(e) {
      activateBorder(e);
      setTimeout(changeCardFace, animDuration/2);
      if ((isFront && e.target.name == "security-code") || (!isFront && e.target.name != "security-code")) {
        //Flip Card
        cardContainer.style.animation = `flipCard ${animDuration}ms`;
        if (isFront) {
          // cardRear.style.animation = `flipCardContent ${animDuration}ms`;
        }
        else {
          // cardFront.style.animation = `flipCardContent ${animDuration}ms`;
        }
        setTimeout(removeAnimation, animDuration);
        isFront = !isFront;
      }
    }

    function removeAnimation () {
      cardContainer.style.animation= "none";
      if (isFront) cardRear.style.animation= "none";
      else cardFront.style.animation= "none";
        cardRear.style.transform = "none";
        cardFront.style.transform = "none";
    }
    function changeCardFace() {
      console.log("changing face for", isFront);
      if (!isFront) {     //CHANGE FACE FROM front TO rear
        cardFront.style.display = "none";
        cardRear.style.display = "flex";
        cardRear.style.transform = "rotateY(-180deg)";
      }
      else {              //CHANGE FACE FROM rear TO front
        cardFront.style.display = "flex";
        cardRear.style.display = "none";
        cardFront.style.transform = "rotateY(-180deg)";
      }
    }
    function activateBorder(e) {
      let focusedInput = document.querySelector(`.${e.target.name}`);
      focusedInput.classList.add("active-border");
    }
    function deactivateBorder(e) {
      let focusedInput = document.querySelector(`.${e.target.name}`);
      focusedInput.classList.remove("active-border");
    }
  </script>
</body>
</html>